
    \begin{center}
    \section*{Inverse Kinematic Solution for ProbeArm}
    \today
    \end{center}
    \section{Introduction}
    This report describes closed form inverse kinematics solutions for ProbeArm.
    The solution was automatically generated by the IK-BT package from the University of Washington Biorobotics Lab.
    The IK-BT package is described in
    \url{https://arxiv.org/abs/1711.05412}.  IK-BT derives your inverse kinematics equations
    using {\tt Python 2.7} and the {\tt sympy} module for symbolic mathematics.
    
\section{Kinematic Parameters}
    The kinematic parameters for this robot are
    \[ \left [ \alpha_{i-1}, \quad a_{i-1}, \quad d_i, \quad \theta_i \right  ] \]
    \begin{dmath} \left[\begin{matrix}0 & 0 & a_{1} & th_{1}\\- \frac{\pi}{2} & l_{1} & 0 & th_{2} - \frac{\pi}{2}\\0 & l_{2} & 0 & th_{3} + \frac{\pi}{2}\\0 & l_{3} & 0 & 0\\0 & 0 & 0 & 0\\0 & 0 & 0 & 0\end{matrix}\right] \end{dmath}
    
\section{Forward Kinematic Equations}
    The forward kinematic equations for this robot are:
\begin{dmath}
\left[\begin{matrix}r_{11} & r_{12} & r_{13} & Px\\r_{21} & r_{22} & r_{23} & Py\\r_{31} & r_{32} & r_{33} & Pz\\0 & 0 & 0 & 1\end{matrix}\right] =  \\
\left[\begin{matrix}c_{1} c_{23} & - c_{1} s_{23} & - s_{1} & c_{1} \left(c_{23} l_{3} + l_{1} + l_{2} s_{2}\right)\\c_{23} s_{1} & - s_{1} s_{23} & c_{1} & s_{1} \left(c_{23} l_{3} + l_{1} + l_{2} s_{2}\right)\\- s_{23} & - c_{23} & 0 & a_{1} + c_{2} l_{2} - l_{3} s_{23}\\0 & 0 & 0 & 1\end{matrix}\right]
\end{dmath}
\section{Unknown Variables: }
The unknown variables for this robot are (in solution order): 
\begin{enumerate}
\item {$\theta_{1}$}
\item {$\theta_{2}$}
\item {$\theta_{3}$}
\item {$\theta_{23}$}
\end{enumerate}
\section{Solutions}
 The following equations comprise the full solution set for this robot.
\subsection{$\theta_{1}$ }
Solution Method:  atan2(y,x)
\begin{align}
\theta_{1} &= \operatorname{atan2}{\left (- r_{13},r_{23} \right )} 
\end{align}
\subsection{$\theta_{2}$ }
Solution Method:  arccos
\begin{align}
\theta_{2s2} &= - \operatorname{acos}{\left (\frac{1}{l_{2}} \left(Pz - a_{1} - l_{3} r_{31}\right) \right )} \\
\theta_{2s1} &= \operatorname{acos}{\left (\frac{1}{l_{2}} \left(Pz - a_{1} - l_{3} r_{31}\right) \right )} 
\end{align}
\subsection{$\theta_{3}$ }
Solution Method:  atan2(y,x)
\begin{align}
\theta_{3s2} &= \operatorname{atan2}{\left (- r_{11} \sin{\left (\theta_{2s1} \right )} \cos{\left (\theta_{1} \right )} - r_{21} \sin{\left (\theta_{1} \right )} \sin{\left (\theta_{2s1} \right )} - r_{31} \cos{\left (\theta_{2s1} \right )},r_{11} \cos{\left (\theta_{1} \right )} \cos{\left (\theta_{2s1} \right )} + r_{21} \sin{\left (\theta_{1} \right )} \cos{\left (\theta_{2s1} \right )} - r_{31} \sin{\left (\theta_{2s1} \right )} \right )} \\
\theta_{3s1} &= \operatorname{atan2}{\left (- r_{11} \sin{\left (\theta_{2s2} \right )} \cos{\left (\theta_{1} \right )} - r_{21} \sin{\left (\theta_{1} \right )} \sin{\left (\theta_{2s2} \right )} - r_{31} \cos{\left (\theta_{2s2} \right )},r_{11} \cos{\left (\theta_{1} \right )} \cos{\left (\theta_{2s2} \right )} + r_{21} \sin{\left (\theta_{1} \right )} \cos{\left (\theta_{2s2} \right )} - r_{31} \sin{\left (\theta_{2s2} \right )} \right )} 
\end{align}
\subsection{$\theta_{23}$ }
Solution Method:  algebra
\begin{align}
\theta_{23s2} &= \theta_{2s2} + \theta_{3s1} \\
\theta_{23s1} &= \theta_{2s1} + \theta_{3s2} 
\end{align}
\section{Solution Graph (Edges)}

    The following is the abstract representation of solution graph for this manipulator (nodes with parent -1 are roots):
    \begin{verbatim}
    
Edge from child: th_23s1 to parent: th_3s2
Edge from child: th_2s1 to parent: -1
Edge from child: th_3s2 to parent: th_1
Edge from child: th_2s2 to parent: -1
Edge from child: th_1 to parent: -1
Edge from child: th_3s2 to parent: th_2s1
Edge from child: th_3s1 to parent: th_2s2
Edge from child: th_23s2 to parent: th_3s1
Edge from child: th_3s1 to parent: th_1
\end{verbatim}
\section{Solution Sets}

    The following are the sets of joint solutions (poses) for this manipulator:
    \begin{verbatim}
    
(th_1, th_2s1, th_3s2, th_23s1)
(th_1, th_2s2, th_3s1, th_23s2)
\end{verbatim}
\section{Equations Used for Solutions}
\subsection{$\theta_{1}$ }
Solution Method:  atan2(y,x)
\begin{dmath}
0 = - r_{13} - \sin{\left (\theta_{1} \right )}
\end{dmath}
\begin{dmath}
0 = - r_{23} + \cos{\left (\theta_{1} \right )}
\end{dmath}
\subsection{$\theta_{2}$ }
Solution Method:  arccos
\begin{dmath}
Pz = a_{1} + l_{2} \cos{\left (\theta_{2} \right )} + l_{3} r_{31}
\end{dmath}
\subsection{$\theta_{3}$ }
Solution Method:  atan2(y,x)
\begin{dmath}
0 = - r_{11} \sin{\left (\theta_{2} \right )} \cos{\left (\theta_{1} \right )} - r_{21} \sin{\left (\theta_{1} \right )} \sin{\left (\theta_{2} \right )} - r_{31} \cos{\left (\theta_{2} \right )} - \sin{\left (\theta_{3} \right )}
\end{dmath}
\begin{dmath}
0 = - r_{11} \cos{\left (\theta_{1} \right )} \cos{\left (\theta_{2} \right )} - r_{21} \sin{\left (\theta_{1} \right )} \cos{\left (\theta_{2} \right )} + r_{31} \sin{\left (\theta_{2} \right )} + \cos{\left (\theta_{3} \right )}
\end{dmath}
\subsection{$\theta_{23}$ }
Solution Method:  algebra
\begin{dmath}
0 = \theta_{2} - \theta_{23} + \theta_{3}
\end{dmath}
